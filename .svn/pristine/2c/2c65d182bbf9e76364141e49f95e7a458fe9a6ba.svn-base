webpackJsonp([3],{qReT:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var i=a("GKmE"),l=a("vLgD"),o={getList:function(t){return Object(l.a)({url:"/manage/system/list",method:"get",params:t})},delete:function(t){return Object(l.a)({url:"/manage/system/del",method:"post",data:{inId:t}})},add:function(t){return Object(l.a)({url:"/manage/system/add",method:"post",data:t})},update:function(t){return Object(l.a)({url:"/manage/system/update",method:"post",data:t})}},n={name:"adminlist",data:function(){return{dialogTitle:null,dialogType:"insert",formLabelWidth:"80px",dialogFormVisible:!1,selectedData:[],currentRow:{},dataForm:{id:null,account:null,passwd:null,state:null,iplimit:null},formSearch:{account:null,state:null,pageSize:10,currentPage:1},totalCount:0,listLoading:!0,delLoading:!1,dialogOKLoading:!1,tableData:[]}},computed:{},created:function(){},mounted:function(){this.onSearch()},methods:{tableChange:function(t,e,a){this.currentRow=t,this.$refs.multipleTable.toggleRowSelection(t)},checkBox:function(t){var e=this;t&&t.length>0&&(this.selectedData=[],t.forEach(function(t){e.selectedData.push(t.id)}))},onSearch:function(){var t=this;this.listLoading=!0,o.getList(this.formSearch).then(function(e){t.totalCount=e.totalCount,t.tableData=e.items,t.listLoading=!1}).catch(function(e){t.listLoading=!1})},handleSizeChange:function(t){this.formSearch.pageSize=t,this.formSearch.currentPage=1,this.onSearch()},handleCurrentChange:function(t){this.formSearch.currentPage=t,this.onSearch()},addData:function(){this.dialogTitle="新增管理员",this.dialogType="insert",this.dialogFormVisible=!0},updateData:function(){if(i.a.isEmpty(this.currentRow))return this.$root.$message.error("请选择您要编辑的管理员信息。"),!1;this.dialogTitle="编辑管理员",this.dialogType="update",this.dataForm.id=this.currentRow.id,this.dataForm.account=this.currentRow.account,this.dataForm.state=this.currentRow.state.toString(),this.dataForm.iplimit=this.currentRow.iplimit,this.dialogFormVisible=!0},deleteData:function(){var t=this;if(this.selectedData.length<=0)return this.$root.$message.error("请选择您要删除的信息。"),!1;var e=this;this.delLoading=!0,o.delete(this.selectedData.toString()).then(function(a){t.$root.$message.success(a.message),e.delLoading=!1,t.onSearch()}).catch(function(t){e.delLoading=!1})},clearForm:function(){this.dataForm.id=null,this.dataForm.account=null,this.dataForm.passwd=null,this.dataForm.state=null,this.dataForm.iplimit=null},dialogOK:function(){"insert"===this.dialogType&&this.save(),"update"===this.dialogType&&this.update()},dialogCancel:function(){this.dialogFormVisible=!1,"insert"===this.dialogType&&this.clearForm()},save:function(){var t=this;this.dialogOKLoading=!0,o.add(this.dataForm).then(function(e){t.$root.$message.success(e.message),t.dialogOKLoading=!1,t.dialogFormVisible=!1,t.clearForm(),t.onSearch()}).catch(function(e){t.dialogOKLoading=!1})},update:function(){var t=this;this.dialogOKLoading=!0,o.update(this.dataForm).then(function(e){t.$root.$message.success(e.message),t.dialogOKLoading=!1,t.dialogFormVisible=!1,t.clearForm(),t.onSearch()}).catch(function(e){t.dialogOKLoading=!1})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"form-context"},[a("el-form",{attrs:{inline:!0,model:t.formSearch}},[a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入管理员账号"},model:{value:t.formSearch.account,callback:function(e){t.$set(t.formSearch,"account",e)},expression:"formSearch.account"}})],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"选择状态"},model:{value:t.formSearch.state,callback:function(e){t.$set(t.formSearch,"state",e)},expression:"formSearch.state"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"无效",value:"0"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:t.listLoading},on:{click:t.onSearch}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addData}},[t._v("新增")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.updateData}},[t._v("编辑")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",loading:t.delLoading},on:{click:t.deleteData}},[t._v("删除")])],1)],1)],1),t._v(" "),a("div",{staticClass:"data-context"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-text":"Loading","element-loading-background":"rgba(0, 0, 0, 0.7)","header-cell-style":{background:"#f8f8f9"},"highlight-current-row":""},on:{"selection-change":t.checkBox,"row-click":t.tableChange}},[a("el-table-column",{attrs:{type:"selection",prop:"id",width:"37","max-width":"37"}}),t._v(" "),a("el-table-column",{attrs:{prop:"account",label:"管理员账号",width:"120"}}),t._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建日期",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t    \t   \t\t\t"+t._s(t._f("dateFormat")(e.row.createtime,"yyyy-MM-dd hh:mm:ss"))+"\n\t    \t   \t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.state?a("el-button",{attrs:{size:"mini",type:"danger"}},[t._v("无效")]):t._e(),t._v(" "),1==e.row.state?a("el-button",{attrs:{size:"mini",type:"success"}},[t._v("正常")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"iplimit",label:"允许登录IP"}})],1)],1),t._v(" "),t.totalCount>t.formSearch.pageSize?a("div",{staticClass:"page-context clearfix"},[a("div",{staticClass:"page-context-right"},[a("el-pagination",{attrs:{"current-page":t.formSearch.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.formSearch.pageSize,layout:"total, sizes, prev, pager, next",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"dialog-context"},[a("el-dialog",{attrs:{title:t.dialogTitle,width:"28%",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.dialogCancel}},[a("el-form",{attrs:{model:t.dataForm}},[a("el-form-item",{attrs:{label:"账号","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"260px"},attrs:{clearable:"",disabled:"update"==t.dialogType,placeholder:"请输入登录账号"},model:{value:t.dataForm.account,callback:function(e){t.$set(t.dataForm,"account",e)},expression:"dataForm.account"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"密码","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"260px"},attrs:{clearable:"",type:"passwd",placeholder:"请输入登录密码"},model:{value:t.dataForm.passwd,callback:function(e){t.$set(t.dataForm,"passwd",e)},expression:"dataForm.passwd"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[a("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择状态"},model:{value:t.dataForm.state,callback:function(e){t.$set(t.dataForm,"state",e)},expression:"dataForm.state"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"无效",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"登录IP","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"96%"},attrs:{type:"textarea",rows:3,placeholder:"允许登录IP地址，多个用“|”号隔开"},model:{value:t.dataForm.iplimit,callback:function(e){t.$set(t.dataForm,"iplimit",e)},expression:"dataForm.iplimit"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.dialogCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.dialogOKLoading},on:{click:t.dialogOK}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[]},s=a("VU/8")(n,r,!1,null,null,null);e.default=s.exports}});