webpackJsonp([6],{Rf88:function(t,e,a){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var l=a("GKmE"),o=a("vLgD"),i={getList:function(t){return Object(o.a)({url:"/manage/message/list",method:"get",params:t})},delete:function(t){return Object(o.a)({url:"/manage/message/del",method:"post",data:{inId:t}})},add:function(t){return Object(o.a)({url:"/manage/message/add",method:"post",data:t})},update:function(t){return Object(o.a)({url:"/manage/message/update",method:"post",data:t})}},s={name:"messageIndex",data:function(){return{dialogTitle:null,dialogType:"insert",formLabelWidth:"80px",dialogFormVisible:!1,currentRow:{},dataForm:{id:null,msgaddress:null,msgtype:"email",state:"1",context:null},formSearch:{msgtype:null,msgaddress:null,state:null,pageSize:10,currentPage:1},selectedData:[],tableData:[],totalCount:0,listLoading:!1,delLoading:!1,dialogOKLoading:!1}},computed:{},created:function(){},mounted:function(){this.onSearch()},methods:{tableChange:function(t,e,a){this.currentRow=t,this.$refs.multipleTable.toggleRowSelection(t)},checkBox:function(t){var e=this;t&&t.length>0&&(this.selectedData=[],t.forEach(function(t){e.selectedData.push(t.id)}))},onSearch:function(){var t=this;this.listLoading=!0,i.getList(this.formSearch).then(function(e){t.totalCount=e.totalCount,t.tableData=e.items,t.listLoading=!1}).catch(function(e){t.listLoading=!1})},addData:function(){this.dialogTitle="新增通知配置",this.dialogType="insert",this.dialogFormVisible=!0},updateData:function(){if(l.a.isEmpty(this.currentRow))return this.$root.$message.error("请选择您要编辑的通知配置。"),!1;this.dialogTitle="编辑通知配置",this.dialogType="update",this.dataForm.id=this.currentRow.id,this.dataForm.msgaddress=this.currentRow.msgaddress,this.dataForm.msgtype=this.currentRow.msgtype,this.dataForm.context=this.currentRow.context,this.dataForm.state=this.currentRow.state.toString(),this.dialogFormVisible=!0},deleteData:function(){var t=this;if(this.selectedData.length<=0)return this.$root.$message.error("请选择您要删除的通知配置。"),!1;var e=this;this.delLoading=!0,i.delete(this.selectedData.toString()).then(function(a){t.$root.$message.success(a.message),e.delLoading=!1,t.onSearch()}).catch(function(t){e.delLoading=!1})},handleSizeChange:function(t){this.formSearch.pageSize=t,this.formSearch.currentPage=1,this.onSearch()},handleCurrentChange:function(t){this.formSearch.currentPage=t,this.onSearch()},clearForm:function(){this.dataForm.id=null,this.dataForm.msgaddress=null,this.dataForm.msgtype="email",this.dataForm.state="1",this.dataForm.context=null},dialogCancel:function(){this.dialogFormVisible=!1,this.clearForm()},dialogOK:function(){"insert"===this.dialogType&&this.save(),"update"===this.dialogType&&this.update()},save:function(){var t=this;this.dialogOKLoading=!0,i.add(this.dataForm).then(function(e){t.$root.$message.success(e.message),t.dialogOKLoading=!1,t.dialogFormVisible=!1,t.clearForm(),t.onSearch()}).catch(function(e){t.dialogOKLoading=!1})},update:function(){var t=this;this.dialogOKLoading=!0,i.update(this.dataForm).then(function(e){t.$root.$message.success(e.message),t.dialogOKLoading=!1,t.dialogFormVisible=!1,t.clearForm(),t.onSearch()}).catch(function(e){t.dialogOKLoading=!1})}}},r={render:function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"app-container"},[a("div",{staticClass:"form-context"},[a("el-form",{attrs:{inline:!0,model:t.formSearch}},[a("el-form-item",[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"通知类型"},model:{value:t.formSearch.msgtype,callback:function(e){t.$set(t.formSearch,"msgtype",e)},expression:"formSearch.msgtype"}},[a("el-option",{attrs:{label:"邮件通知",value:"email"}}),t._v(" "),a("el-option",{attrs:{label:"短信通知",value:"mobile"}})],1)],1),t._v(" "),a("el-form-item",[a("el-input",{attrs:{placeholder:"请输入消息地址"},model:{value:t.formSearch.msgaddress,callback:function(e){t.$set(t.formSearch,"msgaddress",e)},expression:"formSearch.msgaddress"}})],1),t._v(" "),a("el-form-item",[a("el-select",{staticStyle:{width:"120px"},attrs:{clearable:"",placeholder:"选择状态"},model:{value:t.formSearch.state,callback:function(e){t.$set(t.formSearch,"state",e)},expression:"formSearch.state"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"无效",value:"0"}})],1)],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-search",loading:t.listLoading},on:{click:t.onSearch}},[t._v("搜索")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-plus"},on:{click:t.addData}},[t._v("新增")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"primary",icon:"el-icon-edit"},on:{click:t.updateData}},[t._v("编辑")])],1),t._v(" "),a("el-form-item",[a("el-button",{attrs:{type:"danger",icon:"el-icon-delete",loading:t.delLoading},on:{click:t.deleteData}},[t._v("删除")])],1)],1)],1),t._v(" "),a("div",{staticClass:"data-context"},[a("el-table",{directives:[{name:"loading",rawName:"v-loading",value:t.listLoading,expression:"listLoading"}],ref:"multipleTable",staticStyle:{width:"100%"},attrs:{data:t.tableData,border:"","element-loading-text":"Loading","element-loading-background":"rgba(0, 0, 0, 0.7)","header-cell-style":{background:"#f8f8f9"},"highlight-current-row":""},on:{"selection-change":t.checkBox,"row-click":t.tableChange}},[a("el-table-column",{attrs:{type:"selection",prop:"id",width:"37","max-width":"37"}}),t._v(" "),a("el-table-column",{attrs:{prop:"msgaddress",label:"通知地址",width:"260"}}),t._v(" "),a("el-table-column",{attrs:{prop:"msgtype",label:"通知类型",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return["mobile"==e.row.msgtype?a("el-tag",{attrs:{size:"medium",type:"warning"}},[t._v("短信通知")]):t._e(),t._v(" "),"email"==e.row.msgtype?a("el-tag",{attrs:{size:"medium",type:"danger"}},[t._v("邮件通知")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"state",label:"状态",width:"120"},scopedSlots:t._u([{key:"default",fn:function(e){return[0==e.row.state?a("el-button",{attrs:{size:"mini",type:"danger"}},[t._v("无效")]):t._e(),t._v(" "),1==e.row.state?a("el-button",{attrs:{size:"mini",type:"success"}},[t._v("正常")]):t._e()]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"createtime",label:"创建日期",width:"160"},scopedSlots:t._u([{key:"default",fn:function(e){return[t._v("\n\t    \t   \t\t\t"+t._s(t._f("dateFormat")(e.row.createtime,"yyyy-MM-dd hh:mm:ss"))+"\n\t    \t   \t\t")]}}])}),t._v(" "),a("el-table-column",{attrs:{prop:"context",label:"备注"}})],1)],1),t._v(" "),t.totalCount>t.formSearch.pageSize?a("div",{staticClass:"page-context clearfix"},[a("div",{staticClass:"page-context-right"},[a("el-pagination",{attrs:{"current-page":t.formSearch.currentPage,"page-sizes":[10,20,30,40,50],"page-size":t.formSearch.pageSize,layout:"total, sizes, prev, pager, next",total:t.totalCount},on:{"size-change":t.handleSizeChange,"current-change":t.handleCurrentChange}})],1)]):t._e(),t._v(" "),a("div",{staticClass:"dialog-context"},[a("el-dialog",{attrs:{title:t.dialogTitle,width:"28%",visible:t.dialogFormVisible},on:{"update:visible":function(e){t.dialogFormVisible=e},close:t.dialogCancel}},[a("el-form",{attrs:{model:t.dataForm}},[a("el-form-item",{attrs:{label:"通知地址","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"260px"},attrs:{clearable:"",placeholder:"请输入通知地址"},model:{value:t.dataForm.msgaddress,callback:function(e){t.$set(t.dataForm,"msgaddress",e)},expression:"dataForm.msgaddress"}})],1),t._v(" "),a("el-form-item",{attrs:{label:"通知类型","label-width":t.formLabelWidth}},[a("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"通知类型"},model:{value:t.dataForm.msgtype,callback:function(e){t.$set(t.dataForm,"msgtype",e)},expression:"dataForm.msgtype"}},[a("el-option",{attrs:{label:"邮件通知",value:"email"}}),t._v(" "),a("el-option",{attrs:{label:"短信通知",value:"mobile"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"状态","label-width":t.formLabelWidth}},[a("el-select",{staticStyle:{width:"260px"},attrs:{placeholder:"请选择状态"},model:{value:t.dataForm.state,callback:function(e){t.$set(t.dataForm,"state",e)},expression:"dataForm.state"}},[a("el-option",{attrs:{label:"正常",value:"1"}}),t._v(" "),a("el-option",{attrs:{label:"无效",value:"0"}})],1)],1),t._v(" "),a("el-form-item",{attrs:{label:"备注信息","label-width":t.formLabelWidth}},[a("el-input",{staticStyle:{width:"96%"},attrs:{type:"textarea",rows:3,placeholder:""},model:{value:t.dataForm.context,callback:function(e){t.$set(t.dataForm,"context",e)},expression:"dataForm.context"}})],1)],1),t._v(" "),a("div",{staticClass:"dialog-footer",attrs:{slot:"footer"},slot:"footer"},[a("el-button",{on:{click:t.dialogCancel}},[t._v("取 消")]),t._v(" "),a("el-button",{attrs:{type:"primary",loading:t.dialogOKLoading},on:{click:t.dialogOK}},[t._v("确 定")])],1)],1)],1)])},staticRenderFns:[]},n=a("VU/8")(s,r,!1,null,null,null);e.default=n.exports}});